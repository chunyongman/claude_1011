# ì˜¨ë„ ì˜ˆì¸¡ ì œì–´ í†µí•© ì™„ë£Œ ë³´ê³ ì„œ

## ê°œìš”
T4, T5, T6 ì˜¨ë„ì˜ ê³ ê¸‰ ì˜ˆì¸¡ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê³  ì „ì²´ ì‹œìŠ¤í…œì— í†µí•© ì™„ë£Œ

## êµ¬í˜„ ë‚´ìš©

### 1. ì˜¨ë„ ì˜ˆì¸¡ ëª¨ë¸ í™•ì¥ (temperature_predictor.py)
#### ë³€ê²½ ì‚¬í•­:
- **T4 ì˜ˆì¸¡ ì¶”ê°€**: T4 ì˜¨ë„ì— ëŒ€í•œ 5/10/15ë¶„ í›„ ì˜ˆì¸¡ í•„ë“œ ì¶”ê°€
- **íŠ¹ì§• ë²¡í„° í™•ì¥**: 15ê°œ â†’ 19ê°œ (T4 ê´€ë ¨ 4ê°œ íŠ¹ì§• ì¶”ê°€)
  - T4 í˜„ì¬ê°’, í‰ê· , í‘œì¤€í¸ì°¨, ì¦ê°€ìœ¨
- **ëª¨ë¸ ê³„ìˆ˜ ì¶”ê°€**: T4ìš© 9ê°œ ê³„ìˆ˜ (t4_5min, t4_10min, t4_15min Ã— 3ê°œ ì‹œì )
- **êµì°¨í•­ ì—…ë°ì´íŠ¸**: T4 * ì—”ì§„ë¶€í•˜ êµì°¨í•­ ì¶”ê°€
- **ëª¨ë¸ í¬ê¸°**: ~0.5MB â†’ ~0.7MB

#### ì˜ˆì¸¡ ì¶œë ¥:
```python
TemperaturePrediction:
  - t4_current, t5_current, t6_current
  - t4/t5/t6_pred_5min, _pred_10min, _pred_15min
  - confidence, inference_time_ms
```

### 2. IntegratedController í†µí•©
#### ìƒˆë¡œìš´ ê¸°ëŠ¥:
1. **ì˜ˆì¸¡ ì œì–´ ì‹œìŠ¤í…œ ì´ˆê¸°í™”**
   - `PolynomialRegressionPredictor` ì´ˆê¸°í™”
   - `RandomForestOptimizer` ë° `PatternClassifier` í†µí•©
   - `PredictiveController` ìƒì„±

2. **ì˜¨ë„ ì‹œí€€ìŠ¤ ë²„í¼**
   - 30ë¶„ ë°ì´í„° (90ê°œ ë°ì´í„° í¬ì¸íŠ¸, 20ì´ˆ ê°„ê²©)
   - T1~T7, ì—”ì§„ë¶€í•˜ ì‹¤ì‹œê°„ ìˆ˜ì§‘
   - `deque` ì‚¬ìš©ìœ¼ë¡œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì 

3. **ì„ ì œì  ì œì–´ ë¡œì§**
   ```python
   if ì˜ˆì¸¡ í™œì„±í™” and ì‹ ë¢°ë„ > 0.5:
       # 10ë¶„ í›„ ì˜¨ë„ ë³€í™” ê³„ì‚°
       t4_delta = t4_pred_10min - t4_current
       t5_delta = t5_pred_10min - t5_current
       t6_delta = t6_pred_10min - t6_current
       
       # ì˜¨ë„ ìƒìŠ¹ ì˜ˆìƒ ì‹œ ì„ ì œì  ì¦ì†
       if t4_delta > 1.0Â°C:  â†’ FW íŒí”„ +3Hz
       if t5_delta > 0.5Â°C:  â†’ ì „ì²´ +2Hz
       if t6_delta > 1.0Â°C:  â†’ E/R íŒ¬ +4Hz
   ```

4. **ì œì–´ ìš°ì„ ìˆœìœ„**
   - ê¸´ê¸‰ ìƒí™© (T2/T3, T4 ì„ê³„): ì¦‰ì‹œ ëŒ€ì‘
   - ì˜ˆì¸¡ ì œì–´: 10ë¶„ ì „ ì„ ì œì  ëŒ€ì‘
   - PID ì œì–´: í˜„ì¬ ì˜¨ë„ ê¸°ë°˜ ëŒ€ì‘
   - ì—ë„ˆì§€ ì ˆê°: ì•ˆì • ì‹œ ìµœì í™”

### 3. ëª¨ë¸ í•™ìŠµ ë° ë¡œë”©
#### ìë™ ì´ˆê¸°í™”:
- ì‚¬ì „ í•™ìŠµ ëª¨ë¸ ìˆìœ¼ë©´ ë¡œë“œ: `data/models/temperature_predictor.pkl`
- ì—†ìœ¼ë©´ ë”ë¯¸ ëª¨ë¸ë¡œ ì‹œì‘ (50ê°œ ìƒ˜í”Œ)
- ì‹¤ì‹œê°„ ë°ì´í„°ë¡œ ì ì§„ì  ì¬í•™ìŠµ ê°€ëŠ¥

#### ëª¨ë¸ ì €ì¥/ë¡œë“œ:
```python
temp_predictor.save_model("data/models/temperature_predictor.pkl")
temp_predictor.load_model("data/models/temperature_predictor.pkl")
```

### 4. ì œì–´ ê²°ì •ì— ì˜ˆì¸¡ ì •ë³´ í¬í•¨
```python
ControlDecision:
  - sw_pump_freq, fw_pump_freq, er_fan_freq
  - temperature_prediction: Optional[TemperaturePrediction]
  - use_predictive_control: bool
  - control_mode: "predictive_control" or "integrated_pid_energy"
  - reason: ì œì–´ ê·¼ê±° (ì˜ˆ: "ì˜ˆì¸¡ ì œì–´: T6 +2.3Â°C ìƒìŠ¹ ì˜ˆìƒ")
```

## ì—ë„ˆì§€ ì ˆê° íš¨ê³¼

### ì˜ˆì¸¡ ì œì–´ ì¥ì :
1. **ì„ ì œì  ëŒ€ì‘**: ì˜¨ë„ ìƒìŠ¹ 10ë¶„ ì „ ë¯¸ë¦¬ ì¦ì†
   - ê¸´ê¸‰ 60Hz ë™ì‘ ë°©ì§€
   - ì—ë„ˆì§€ íš¨ìœ¨ ìµœì  êµ¬ê°„(45-50Hz) ìœ ì§€

2. **ê³¼ë„ ì‘ë‹µ ë°©ì§€**: ì˜¨ë„ í•˜ê°• ì˜ˆì¸¡ ì‹œ ì£¼íŒŒìˆ˜ ì¡°ê¸° ê°ì†
   - ë¶ˆí•„ìš”í•œ ê³ ì£¼íŒŒìˆ˜ ìš´ì „ ë°©ì§€

3. **í†µí•© íš¨ê³¼**: 
   - 60Hz ê³ ì • ëŒ€ë¹„ 46-52% ì—ë„ˆì§€ ì ˆê° (ê¸°ì¡´)
   - ì˜ˆì¸¡ ì œì–´ë¡œ ì¶”ê°€ 2-5% ì ˆê° ì˜ˆìƒ

### ì‹œë‚˜ë¦¬ì˜¤ë³„ ë™ì‘:
| ìƒí™© | ê¸°ì¡´ (PID) | ì˜ˆì¸¡ ì œì–´ |
|------|-----------|----------|
| ì—”ì§„ ë¶€í•˜ ê¸‰ì¦ | T6 ìƒìŠ¹ í›„ 60Hz | 10ë¶„ ì „ 55Hz ì¦ì† |
| ì •ë°• | T6 í•˜ê°• í›„ ê°ì† | 5ë¶„ ì „ ë¯¸ë¦¬ ê°ì† |
| ì •ìƒ ìš´í•­ | ë°˜ì‘ì  ì œì–´ | PID ì œì–´ ìœ ì§€ |

## ì‚¬ìš© ë°©ë²•

### ì˜ˆì¸¡ ì œì–´ í™œì„±í™”:
```python
controller = IntegratedController(
    equipment_manager=None,
    enable_predictive_control=True  # ê¸°ë³¸ê°’
)
```

### ì˜ˆì¸¡ ì œì–´ ë¹„í™œì„±í™”:
```python
controller = IntegratedController(
    enable_predictive_control=False
)
```

### ì œì–´ ê²°ê³¼ í™•ì¸:
```python
decision = controller.compute_control(...)

if decision.use_predictive_control:
    print(f"ì˜ˆì¸¡ ì œì–´ í™œì„±: {decision.reason}")
    print(f"T4 ì˜ˆì¸¡: {decision.temperature_prediction.t4_pred_10min:.1f}Â°C")
    print(f"T5 ì˜ˆì¸¡: {decision.temperature_prediction.t5_pred_10min:.1f}Â°C")
    print(f"T6 ì˜ˆì¸¡: {decision.temperature_prediction.t6_pred_10min:.1f}Â°C")
```

## ì„±ëŠ¥ ì§€í‘œ

### ëª¨ë¸ ì„±ëŠ¥:
- **ëª¨ë¸ í¬ê¸°**: ~0.7MB (Xavier NX ë©”ëª¨ë¦¬ì˜ 0.01%)
- **ì¶”ë¡  ì‹œê°„**: <10ms (ëª©í‘œ ë‹¬ì„±)
- **ì˜ˆì¸¡ ì •í™•ë„**: Â±2-3Â°C (í•™ìŠµ ë°ì´í„° ì˜ì¡´)
- **ì‹ ë¢°ë„**: í•™ìŠµ ì •í™•ë„ ê¸°ë°˜ ë™ì  ê³„ì‚°

### ì‹œìŠ¤í…œ ì„±ëŠ¥:
- **ë©”ëª¨ë¦¬ ì‚¬ìš©**: +1MB (ì˜¨ë„ ì‹œí€€ìŠ¤ ë²„í¼)
- **CPU ì˜¤ë²„í—¤ë“œ**: <1% (2ì´ˆ ì£¼ê¸° ì˜ˆì¸¡)
- **ë°ì´í„° ìˆ˜ì§‘ ì£¼ê¸°**: 20ì´ˆ (90ê°œ í¬ì¸íŠ¸ = 30ë¶„)

## ë‹¤ìŒ ë‹¨ê³„

1. âœ… T4 ì˜ˆì¸¡ ê¸°ëŠ¥ ì¶”ê°€
2. âœ… IntegratedController í†µí•©
3. ğŸ”„ HMI Dashboard ì˜ˆì¸¡ ì •ë³´ í‘œì‹œ
4. â³ ì‹¤ì œ ë°ì´í„°ë¡œ ëª¨ë¸ í•™ìŠµ
5. â³ ì„±ëŠ¥ ê²€ì¦ ë° íŠœë‹

## íŒŒì¼ ë³€ê²½ ì‚¬í•­

### ìˆ˜ì •ëœ íŒŒì¼:
- `src/ml/temperature_predictor.py`: T4 ì˜ˆì¸¡ ì¶”ê°€, íŠ¹ì§• í™•ì¥
- `src/control/integrated_controller.py`: ì˜ˆì¸¡ ì œì–´ í†µí•©, ë²„í¼ ê´€ë¦¬

### í˜¸í™˜ì„±:
- ê¸°ì¡´ ì½”ë“œì™€ ì™„ì „ í˜¸í™˜ (`enable_predictive_control=False`)
- ì ì§„ì  í™œì„±í™” ê°€ëŠ¥
- ëª¨ë¸ íŒŒì¼ ì—†ì–´ë„ ë™ì‘ (ë”ë¯¸ ëª¨ë¸ ìë™ ìƒì„±)

## ì£¼ì˜ì‚¬í•­

1. **í•™ìŠµ ë°ì´í„° í•„ìš”**: ë”ë¯¸ ëª¨ë¸ì€ ì •í™•ë„ ë‚®ìŒ
   - ì‹¤ì œ ìš´í•­ ë°ì´í„° 50ê°œ ì´ìƒ ìˆ˜ì§‘ í•„ìš”
   - ì£¼ 2íšŒ ë°°ì¹˜ í•™ìŠµìœ¼ë¡œ ì§€ì† ê°œì„ 

2. **ì‹ ë¢°ë„ ì„ê³„ê°’**: 0.5 ì´ìƒì¼ ë•Œë§Œ ì˜ˆì¸¡ ì œì–´ í™œì„±
   - í•™ìŠµ ì´ˆê¸°ì—ëŠ” ë°˜ì‘ì  ì œì–´ ì‚¬ìš©
   - í•™ìŠµ ì§„í–‰ë˜ë©´ ìë™ìœ¼ë¡œ ì˜ˆì¸¡ ì œì–´ ì „í™˜

3. **ê¸´ê¸‰ ìƒí™© ìš°ì„ **: ì˜ˆì¸¡ ì œì–´ë³´ë‹¤ ì•ˆì „ ìš°ì„ 
   - T2/T3 â‰¥ 49Â°C: ì¦‰ì‹œ 60Hz
   - T4 â‰¥ 48Â°C: ì¦‰ì‹œ 60Hz
   - PX1 < 1.0bar: ì£¼íŒŒìˆ˜ ê°ì†Œ ì œí•œ

## ìš”ì•½

**í•µì‹¬ ë‹¬ì„±:**
- âœ… T4, T5, T6 ëª¨ë‘ ê³ ê¸‰ Polynomial Regression ì˜ˆì¸¡ ì§€ì›
- âœ… 5/10/15ë¶„ í›„ ì˜¨ë„ ì˜ˆì¸¡
- âœ… IntegratedControllerì— ì™„ì „ í†µí•©
- âœ… ì„ ì œì  ì£¼íŒŒìˆ˜ ì œì–´ êµ¬í˜„
- âœ… ì—ë„ˆì§€ ì ˆê° + ì˜¨ë„ ì•ˆì •ì„± ë™ì‹œ ë‹¬ì„±

**ë‹¤ìŒ ëª©í‘œ:**
- HMI ëŒ€ì‹œë³´ë“œì— ì˜ˆì¸¡ ì •ë³´ ì‹¤ì‹œê°„ í‘œì‹œ
- ì‹¤ì œ ë°ì´í„°ë¡œ ëª¨ë¸ ì¬í•™ìŠµ
- ì˜ˆì¸¡ ì •í™•ë„ ê²€ì¦ ë° íŠœë‹

