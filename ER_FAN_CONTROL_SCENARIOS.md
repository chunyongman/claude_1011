# E/R 팬 제어 동작 시나리오 (목표 43°C, 극한 47°C)

## 🎯 제어 설정

```
목표 온도: 43.0°C
허용 범위: 42-44°C (±1.0°C)
극한 온도: 47.0°C (Safety Layer 강제 개입)
ML 작동 갭: 4.0°C

주파수 범위: 40-60Hz
팬 대수 범위: 2-4대
비례 게인 Kp: 3.0
```

---

## 📊 시나리오 1: 정상 운전 (안정 상태)

### 초기 조건
```
T6 = 43.0°C (목표 온도)
주파수 = 48.0Hz
팬 대수 = 3대
엔진 부하 = 70%
외기 온도 = 25°C
```

### 진행 과정

```
Cycle 1 (0분):
├─ T6 = 43.0°C (목표!)
├─ ML 예측 (5분 후): 43.1°C
├─ error_current = 0.0
├─ error_predicted = 0.1
├─ adjustment = 0.03Hz
├─ 주파수: 48.0 → 48.0Hz (거의 변화 없음)
├─ 팬 대수: 3대 (유지)
└─ 상태: STABLE ✅

Cycle 2-10 (2-20분):
├─ T6 = 42.8 ~ 43.2°C (목표 ±0.2°C)
├─ 주파수: 47.5 ~ 48.5Hz (미세 조정)
├─ 팬 대수: 3대 (안정)
└─ 상태: STABLE ✅

결과:
✅ 온도 안정 유지
✅ 에너지 효율적 운전
✅ 대수 변화 없음
```

---

## 📊 시나리오 2: 온도 상승 + 팬 대수 증가 (3대 → 4대)

### 초기 조건
```
T6 = 43.0°C (정상)
주파수 = 48.0Hz
팬 대수 = 3대
엔진 부하 = 70% → 90% (급증!)
외기 온도 = 30°C (고온)
```

### 진행 과정

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 1: 온도 상승 + 주파수 증가 (0-5분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 1 (0분):
├─ T6 = 43.0°C → 43.5°C (상승 시작!)
├─ ML 예측 (5분 후): 45.5°C ⚠️
├─ error_current = 0.5
├─ error_predicted = 2.5
├─ error_combined = 2.0 (큼!)
├─ adjustment = +6.0Hz → 제한 +5.0Hz
├─ 주파수: 48.0 → 53.0Hz (증속!)
├─ 팬 대수: 3대 (유지)
├─ 60Hz까지 거리: 7Hz
└─ 상태: COOLING 🔥

Cycle 2 (2분):
├─ T6 = 44.0°C (계속 상승)
├─ ML 예측: 45.8°C
├─ error_combined = 2.1
├─ adjustment = +6.3Hz → 제한 +5.0Hz
├─ 주파수: 53.0 → 58.0Hz (계속 증속!)
├─ 팬 대수: 3대 (유지)
├─ 60Hz까지 거리: 2Hz
└─ 상태: COOLING 🔥

Cycle 3 (4분):
├─ T6 = 44.8°C (고온!)
├─ ML 예측: 45.5°C
├─ error_combined = 2.2
├─ adjustment = +6.6Hz → 제한 +5.0Hz
├─ 주파수: 58.0 → 60.0Hz (최대 도달!) ⚠️
├─ 팬 대수: 3대 (유지)
├─ 60Hz 도달: Timer 시작!
└─ 상태: COOLING 🔥

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 2: 60Hz 유지 + 온도 계속 상승 (5-8분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 4 (6분):
├─ T6 = 45.2°C (고온 지속!)
├─ ML 예측: 45.0°C (안정화 조짐)
├─ 주파수: 60.0Hz (최대 유지)
├─ 팬 대수: 3대
├─ 60Hz 지속 시간: 2초
├─ 대수 증가 조건 확인:
│  ├─ 극한 도달? NO (45.2 < 47.0)
│  ├─ 극한 예상? NO (예측 45.0 < 47.0)
│  ├─ 고온 + 5초? NO (2초 < 5초)
│  └─ 정상 + 10초? NO (2초 < 10초)
└─ 상태: COOLING (대기 중...)

Cycle 5 (8분):
├─ T6 = 45.0°C (고온 유지)
├─ ML 예측: 44.5°C (하강 예상)
├─ 주파수: 60.0Hz (최대 유지)
├─ 팬 대수: 3대
├─ 60Hz 지속 시간: 4초
├─ 대수 증가 조건 확인:
│  ├─ 극한 도달? NO
│  ├─ 극한 예상? NO
│  ├─ 고온 + 5초? NO (4초 < 5초)
│  └─ 정상 + 10초? NO
└─ 상태: COOLING (대기 중...)

Cycle 6 (10분):
├─ T6 = 44.8°C (여전히 고온)
├─ ML 예측: 44.0°C
├─ 주파수: 60.0Hz (최대 유지)
├─ 팬 대수: 3대
├─ 60Hz 지속 시간: 6초
├─ 대수 증가 조건 확인:
│  ├─ 극한 도달? NO
│  ├─ 극한 예상? NO
│  ├─ 고온 + 5초? YES! ✅ (T6 = 44.8 < 45.0) ❌
│  │  (44.8 < 45.0이므로 조건 불충족)
│  └─ 정상 + 10초? NO (6초 < 10초)
└─ 상태: COOLING (계속 대기...)

Cycle 7 (12분):
├─ T6 = 44.5°C (하강 시작)
├─ ML 예측: 43.5°C (정상 복귀 예상)
├─ 주파수: 60.0Hz
├─ 팬 대수: 3대
├─ 60Hz 지속 시간: 8초
├─ 대수 증가 조건 확인:
│  ├─ 극한 도달? NO
│  ├─ 극한 예상? NO
│  ├─ 고온 + 5초? NO (44.5 < 45.0)
│  └─ 정상 + 10초? NO (8초 < 10초)
└─ 상태: COOLING → STABLE

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 3: 온도 하강 + 주파수 감소 (12-30분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 8 (14분):
├─ T6 = 44.0°C (정상 상한)
├─ ML 예측: 43.0°C
├─ error_combined = 0.7
├─ adjustment = +2.1Hz (아직 양수)
├─ 주파수: 60.0 → 60.0Hz (상한 유지)
├─ 팬 대수: 3대
├─ 60Hz 지속 시간: 10초 도달! ⚠️
├─ 대수 증가 조건 확인:
│  ├─ 정상 + 10초? YES! ✅
│  └─ 하지만 온도 하강 추세...
├─ 판단: 온도 하강 중이므로 대수 증가 보류
└─ 상태: STABLE

Cycle 9-15 (16-30분):
├─ T6: 44.0 → 43.5 → 43.2 → 43.0°C (정상 복귀!)
├─ 주파수: 60 → 58 → 56 → 54 → 52Hz (점진 감속)
├─ 팬 대수: 3대 (유지)
└─ 상태: STABLE → ENERGY_SAVING

최종 (30분):
├─ T6 = 43.0°C (목표 복귀!)
├─ 주파수 = 52.0Hz
├─ 팬 대수 = 3대
└─ 상태: STABLE ✅

결과:
✅ 최고 온도: 45.2°C (47°C에서 1.8°C 여유)
✅ 60Hz 도달했지만 대수 증가 불필요
✅ 온도 자연 하강으로 정상 복귀
❌ 대수 증가 없음 (필요 없었음)
```

---

## 📊 시나리오 3: 극한 온도 + 팬 대수 긴급 증가 (3대 → 4대)

### 초기 조건
```
T6 = 43.0°C (정상)
주파수 = 48.0Hz
팬 대수 = 3대
엔진 부하 = 70% → 95% (과부하!)
외기 온도 = 35°C (매우 고온)
냉각수 펌프 = 85% (약간 저하)
```

### 진행 과정

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 1: 급격한 온도 상승 (0-5분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 1 (0분):
├─ T6 = 43.0 → 44.0°C (급상승!)
├─ ML 예측 (5분 후): 47.5°C! ⚠️⚠️
├─ error_combined = 2.8 (매우 큼!)
├─ adjustment = +8.4Hz → 제한 +5.0Hz
├─ 주파수: 48.0 → 53.0Hz (긴급 증속!)
├─ 팬 대수: 3대
└─ 상태: COOLING 🔥🔥

Cycle 2 (2분):
├─ T6 = 45.0°C (고온!)
├─ ML 예측: 47.8°C (극한 초과 예상!)
├─ error_combined = 3.2
├─ adjustment = +9.6Hz → 제한 +5.0Hz
├─ 주파수: 53.0 → 58.0Hz
├─ 팬 대수: 3대
└─ 상태: COOLING 🔥🔥

Cycle 3 (4분):
├─ T6 = 45.8°C (매우 고온!)
├─ ML 예측: 47.5°C (극한 예상!)
├─ error_combined = 3.0
├─ adjustment = +9.0Hz → 제한 +5.0Hz
├─ 주파수: 58.0 → 60.0Hz (최대 도달!) ⚠️
├─ 팬 대수: 3대
├─ 60Hz 도달: Timer 시작!
└─ 상태: COOLING 🔥🔥

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 2: 극한 예상 + 선제 대수 증설! (5-7분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 4 (6분):
├─ T6 = 46.5°C (극한 근접!)
├─ ML 예측 (5분 후): 47.0°C! ⚠️⚠️⚠️
├─ 주파수: 60.0Hz (최대 유지)
├─ 팬 대수: 3대
├─ 60Hz 지속 시간: 2초
│
├─ 🚨 대수 증가 조건 확인:
│  ├─ [조건 1] 극한 도달? T6 ≥ 47.0°C
│  │  └─ NO (46.5 < 47.0)
│  │
│  ├─ [조건 2] 극한 예상? T6 ≥ 46.0 & 예측 ≥ 47.0
│  │  ├─ T6 = 46.5°C ≥ 46.0°C? YES! ✅
│  │  ├─ 예측 = 47.0°C ≥ 47.0°C? YES! ✅
│  │  ├─ freq = 60Hz? YES! ✅
│  │  └─ 결론: 조건 충족! 즉시 증설!
│  │
│  └─ ✅ 선제 대응 발동!
│
├─ ⚡ 조치: 팬 대수 증가!
│  ├─ 3대 → 4대 (즉시!)
│  ├─ 대기 시간: 0초 (긴급!)
│  ├─ 주파수: 60Hz → 52Hz (부하 분산!)
│  └─ 이유: "극한 예상 (예측 47.0°C) → 선제 4대 증설!"
│
└─ 상태: COOLING → EMERGENCY_PREVENTION 🚨

Cycle 5 (7분):
├─ T6 = 46.8°C (억제 효과 시작!)
├─ ML 예측: 46.5°C (하강 예상!)
├─ 주파수: 52.0Hz (4대 분산)
├─ 팬 대수: 4대 ⭐
├─ error_combined = 2.3 (감소 중!)
├─ adjustment = +6.9Hz → 제한 +5.0Hz
├─ 주파수: 52.0 → 57.0Hz (재증속)
└─ 상태: COOLING 🔥

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 3: 온도 상승 억제 (7-15분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 6 (8분):
├─ T6 = 46.9°C (거의 정점!)
├─ ML 예측: 46.2°C (하강 확실!)
├─ 주파수: 57.0 → 60.0Hz (재최대)
├─ 팬 대수: 4대 ⭐
└─ 상태: COOLING

Cycle 7 (10분):
├─ T6 = 46.7°C (하강 시작!)
├─ ML 예측: 45.8°C
├─ 주파수: 60.0Hz (유지)
├─ 팬 대수: 4대 ⭐
└─ 상태: COOLING → STABLE

Cycle 8-10 (12-20분):
├─ T6: 46.5 → 46.0 → 45.5 → 45.0°C (점진 하강)
├─ 주파수: 60 → 59 → 58 → 57Hz
├─ 팬 대수: 4대 유지 ⭐
└─ 상태: STABLE

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 4: 정상 복귀 (20-40분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 11-20 (22-40분):
├─ T6: 45.0 → 44.5 → 44.0 → 43.5°C
├─ 주파수: 57 → 55 → 53 → 51Hz
├─ 팬 대수: 4대 유지 ⭐
└─ 상태: STABLE → ENERGY_SAVING

최종 (40분):
├─ T6 = 43.5°C (거의 정상)
├─ 주파수 = 51.0Hz
├─ 팬 대수 = 4대 ⭐
└─ 상태: STABLE

결과:
✅ 극한 진입 방지! (최고 46.9°C < 47.0°C)
✅ Cycle 4에서 선제 4대 증설 (ML 예측 활용!)
✅ 대응 지연 없음 (즉시 증설!)
✅ 온도 억제 성공 (47°C 미도달!)
⚠️ 4대 유지 중 (부하 지속)
```

---

## 📊 시나리오 4: 극한 돌파 + 긴급 대수 증가 (3대 → 4대)

### 초기 조건
```
T6 = 43.0°C (정상)
주파수 = 48.0Hz
팬 대수 = 3대
엔진 부하 = 70% → 100% (최대 부하!)
외기 온도 = 38°C (극고온)
냉각수 펌프 = 75% (성능 저하!)
```

### 진행 과정

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 1: 급격한 온도 상승 (0-5분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 1-3 (0-6분):
├─ T6: 43 → 44.5 → 46.0 → 46.8°C (급상승!)
├─ 주파수: 48 → 53 → 58 → 60Hz (최대!)
├─ 팬 대수: 3대
└─ 상태: COOLING 🔥🔥🔥

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 2: 극한 온도 도달 + 긴급 증설! (7분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 4 (7분):
├─ T6 = 47.0°C (극한 도달!) 🚨🚨🚨
├─ ML 예측: 47.5°C (계속 상승 예상!)
│
├─ 🔴 Safety Layer 발동!
│  ├─ T6 ≥ 47.0°C 감지!
│  ├─ safety_override = True
│  ├─ 강제 주파수: 60Hz
│  └─ 모드: EMERGENCY
│
├─ 주파수: 60.0Hz (강제!)
├─ 팬 대수: 3대 (아직!)
│
├─ 🚨 대수 증가 조건 확인:
│  ├─ [조건 1] 극한 도달? T6 ≥ 47.0°C
│  │  ├─ T6 = 47.0°C ≥ 47.0°C? YES! ✅
│  │  ├─ freq = 60Hz? YES! ✅
│  │  └─ 결론: 즉시 증설!
│  │
│  └─ ✅ 긴급 대응 발동!
│
├─ ⚡⚡ 조치: 팬 대수 긴급 증가!
│  ├─ 3대 → 4대 (즉시!)
│  ├─ 대기 시간: 0초 (긴급!)
│  ├─ 주파수: 60Hz → 52Hz (부하 분산!)
│  └─ 이유: "긴급 고온 47.0°C 도달 → 즉시 4대 증설!"
│
├─ 알람: "🚨 극한 온도 47°C 도달! 긴급 4대 가동!"
└─ 상태: EMERGENCY 🚨🚨🚨

Cycle 5 (8분):
├─ T6 = 47.2°C (아직 상승!)
├─ ML 예측: 47.0°C (정점 예상)
├─ 주파수: 52.0Hz (4대 분산)
├─ 팬 대수: 4대 ⭐
├─ adjustment = +12.6Hz → 제한 +5.0Hz
├─ 주파수: 52.0 → 57.0Hz (재증속!)
└─ 상태: EMERGENCY

Cycle 6 (9분):
├─ T6 = 47.3°C (정점!) 🔴
├─ ML 예측: 46.8°C (하강 예상!)
├─ 주파수: 57.0 → 60.0Hz (재최대!)
├─ 팬 대수: 4대 ⭐
└─ 상태: EMERGENCY

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 3: 온도 하강 + 정상 복귀 (10-30분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 7 (10분):
├─ T6 = 47.0°C (하강 시작!)
├─ ML 예측: 46.5°C
├─ 주파수: 60.0Hz
├─ 팬 대수: 4대 ⭐
└─ 상태: EMERGENCY

Cycle 8 (12분):
├─ T6 = 46.8°C (극한 벗어남!) ✅
├─ ML 예측: 46.0°C
├─ Safety Layer 해제!
├─ 주파수: 60.0Hz
├─ 팬 대수: 4대 ⭐
└─ 상태: EMERGENCY → COOLING

Cycle 9-15 (14-30분):
├─ T6: 46.5 → 45.8 → 45.0 → 44.5°C
├─ 주파수: 60 → 59 → 57 → 55Hz
├─ 팬 대수: 4대 유지 ⭐
└─ 상태: COOLING → STABLE

최종 (30분):
├─ T6 = 44.5°C (안정)
├─ 주파수 = 55.0Hz
├─ 팬 대수 = 4대 ⭐
└─ 상태: STABLE

결과:
✅ 극한 진입 감지 즉시 4대 증설!
✅ 최고 온도 47.3°C (억제 효과!)
✅ 대응 지연 0초 (즉시 대응!)
⚠️ 극한 진입 불가피 (냉각 펌프 성능 저하)
⚠️ 4대 유지 중 (고부하 지속)
```

---

## 📊 시나리오 5: 온도 하강 + 팬 대수 감소 (3대 → 2대)

### 초기 조건
```
T6 = 43.0°C (정상)
주파수 = 48.0Hz
팬 대수 = 3대
엔진 부하 = 70% → 40% (급감!)
외기 온도 = 15°C (저온)
```

### 진행 과정

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 1: 온도 하강 + 주파수 감소 (0-10분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 1 (0분):
├─ T6 = 43.0 → 42.5°C (하강 시작)
├─ ML 예측 (5분 후): 41.0°C
├─ error_combined = -0.4
├─ adjustment = -1.2Hz
├─ 주파수: 48.0 → 46.8Hz (감속!)
├─ 팬 대수: 3대
└─ 상태: STABLE → ENERGY_SAVING ❄️

Cycle 2 (2분):
├─ T6 = 42.0°C (정상 하한)
├─ ML 예측: 40.5°C (더 하강 예상)
├─ error_combined = -0.7
├─ adjustment = -2.1Hz
├─ 주파수: 46.8 → 44.7Hz
├─ 팬 대수: 3대
└─ 상태: ENERGY_SAVING ❄️

Cycle 3 (4분):
├─ T6 = 41.5°C (목표 아래)
├─ ML 예측: 40.0°C
├─ error_combined = -1.2
├─ adjustment = -3.6Hz
├─ 주파수: 44.7 → 41.1Hz (40Hz 근접!)
├─ 팬 대수: 3대
└─ 상태: ENERGY_SAVING ❄️

Cycle 4 (6분):
├─ T6 = 41.0°C
├─ ML 예측: 39.8°C
├─ error_combined = -1.4
├─ adjustment = -4.2Hz
├─ 주파수: 41.1 → 40.0Hz (하한 도달!) ⚠️
├─ 팬 대수: 3대
├─ 40Hz 도달: Timer 시작!
└─ 상태: ENERGY_SAVING ❄️

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 2: 40Hz 유지 + 대수 감소 대기 (10-20분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 5 (8분):
├─ T6 = 40.8°C (저온 유지)
├─ ML 예측: 40.0°C (안정 예상)
├─ 주파수: 40.0Hz (하한 유지)
├─ 팬 대수: 3대
├─ 40Hz 지속 시간: 2초
├─ 대수 감소 조건 확인:
│  ├─ freq ≤ 40Hz? YES ✅
│  ├─ 10초 지속? NO (2초 < 10초)
│  └─ 결론: 계속 대기
└─ 상태: ENERGY_SAVING (대기 중...)

Cycle 6 (10분):
├─ T6 = 40.5°C
├─ ML 예측: 40.2°C
├─ 주파수: 40.0Hz
├─ 팬 대수: 3대
├─ 40Hz 지속 시간: 4초
├─ 대수 감소 조건 확인:
│  └─ 10초 지속? NO (4초 < 10초)
└─ 상태: ENERGY_SAVING (대기 중...)

Cycle 7 (12분):
├─ T6 = 40.2°C
├─ ML 예측: 40.5°C (약간 상승 예상)
├─ 주파수: 40.0Hz
├─ 팬 대수: 3대
├─ 40Hz 지속 시간: 6초
├─ 대수 감소 조건 확인:
│  └─ 10초 지속? NO (6초 < 10초)
└─ 상태: ENERGY_SAVING (대기 중...)

Cycle 8 (14분):
├─ T6 = 40.0°C (저온 지속)
├─ ML 예측: 40.0°C (안정)
├─ 주파수: 40.0Hz
├─ 팬 대수: 3대
├─ 40Hz 지속 시간: 8초
├─ 대수 감소 조건 확인:
│  └─ 10초 지속? NO (8초 < 10초)
└─ 상태: ENERGY_SAVING (대기 중...)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 3: 팬 대수 감소! (16분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 9 (16분):
├─ T6 = 39.8°C (저온 유지)
├─ ML 예측: 40.2°C (미세 상승 예상)
├─ 주파수: 40.0Hz (하한 유지)
├─ 팬 대수: 3대
├─ 40Hz 지속 시간: 10초 도달! ⚠️
│
├─ 🔵 대수 감소 조건 확인:
│  ├─ freq ≤ 40Hz? YES ✅
│  ├─ 10초 지속? YES ✅ (10초 도달!)
│  ├─ 현재 대수 > 2? YES ✅ (3대 > 2대)
│  └─ 결론: 대수 감소 실행!
│
├─ ⚡ 조치: 팬 대수 감소!
│  ├─ 3대 → 2대 ✅
│  ├─ 주파수: 40Hz → 48Hz (부하 재분배!)
│  │  (2대로 40Hz 유지하면 냉각 부족 가능)
│  └─ 이유: "40Hz 10초 지속 → 에너지 절감 2대 감소"
│
└─ 상태: ENERGY_SAVING → STABLE 💰

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 4: 2대 운전 + 온도 재조정 (16-30분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 10 (18분):
├─ T6 = 40.0°C (2대로 약간 상승)
├─ ML 예측: 41.0°C (정상 복귀 예상)
├─ 주파수: 48.0Hz
├─ 팬 대수: 2대 ⭐
├─ error_combined = -0.9
├─ adjustment = -2.7Hz
├─ 주파수: 48.0 → 45.3Hz
└─ 상태: STABLE

Cycle 11 (20분):
├─ T6 = 40.5°C (서서히 상승)
├─ ML 예측: 41.5°C
├─ 주파수: 45.3Hz
├─ 팬 대수: 2대 ⭐
├─ error_combined = -0.8
├─ adjustment = -2.4Hz
├─ 주파수: 45.3 → 42.9Hz
└─ 상태: STABLE

Cycle 12 (22분):
├─ T6 = 41.0°C (정상 하한)
├─ ML 예측: 42.0°C
├─ 주파수: 42.9Hz
├─ 팬 대수: 2대 ⭐
├─ error_combined = -0.4
├─ adjustment = -1.2Hz
├─ 주파수: 42.9 → 41.7Hz
└─ 상태: STABLE

Cycle 13-15 (24-30분):
├─ T6: 41.5 → 42.0 → 42.5°C (정상 범위)
├─ 주파수: 41.7 → 42.0 → 43.5Hz
├─ 팬 대수: 2대 유지 ⭐
└─ 상태: STABLE

최종 (30분):
├─ T6 = 42.5°C (정상)
├─ 주파수 = 43.5Hz
├─ 팬 대수 = 2대 ⭐
└─ 상태: STABLE

결과:
✅ 40Hz 10초 지속 후 2대 감소!
✅ 주파수: 40Hz → 48Hz (재조정)
✅ 온도 정상 범위 복귀 (42.5°C)
✅ 에너지 약 33% 절감! (3대 → 2대)
✅ 안정적 운전 유지
```

---

## 📊 시나리오 6: 극지 항해 + 최소 운전 (3대 → 2대)

### 초기 조건
```
T6 = 43.0°C (정상)
주파수 = 48.0Hz
팬 대수 = 3대
엔진 부하 = 60% (보통)
외기 온도 = -5°C (극저온!)
항로: 알래스카
```

### 진행 과정

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 1: 급격한 온도 하강 (0-10분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 1-3 (0-6분):
├─ 외기 -5°C 영향 시작
├─ T6: 43.0 → 42.0 → 41.0 → 40.0°C (급하강!)
├─ ML 예측: 계속 하강 예상
├─ 주파수: 48 → 45 → 42 → 40Hz (급감속!)
├─ 팬 대수: 3대 (유지)
└─ 상태: ENERGY_SAVING ❄️❄️

Cycle 4 (8분):
├─ T6 = 39.0°C (매우 낮음!)
├─ ML 예측: 37.5°C (더 하강!)
├─ 주파수: 40.0Hz (하한)
├─ 팬 대수: 3대
├─ 40Hz 지속 시간: 2초
└─ 상태: ENERGY_SAVING ❄️❄️

Cycle 5-8 (10-16분):
├─ T6: 38.5 → 38.0 → 37.8°C (계속 하강)
├─ ML 예측: 37.0 → 36.5°C
├─ 주파수: 40.0Hz (하한 유지)
├─ 팬 대수: 3대
├─ 40Hz 지속 시간: 2 → 4 → 6 → 8초
└─ 상태: ENERGY_SAVING ❄️❄️

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 2: 팬 대수 감소 (18분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 9 (18분):
├─ T6 = 37.5°C (극저온!)
├─ ML 예측: 36.8°C
├─ 주파수: 40.0Hz
├─ 팬 대수: 3대
├─ 40Hz 지속 시간: 10초 도달! ⚠️
│
├─ 🔵 대수 감소 조건 확인:
│  ├─ freq ≤ 40Hz? YES ✅
│  ├─ 10초 지속? YES ✅
│  ├─ 현재 대수 > 2? YES ✅
│  └─ 결론: 대수 감소!
│
├─ ⚡ 조치: 팬 대수 감소!
│  ├─ 3대 → 2대 ✅
│  ├─ 주파수: 40Hz → 48Hz (재분배)
│  └─ 이유: "극저온 운전 → 최소 2대로 에너지 절감"
│
└─ 상태: ENERGY_SAVING 💰❄️

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Phase 3: 최소 운전 + 온도 안정화 (18-40분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Cycle 10 (20분):
├─ T6 = 37.8°C (2대로 약간 상승)
├─ ML 예측: 38.5°C
├─ 주파수: 48.0Hz
├─ 팬 대수: 2대 ⭐
├─ error_combined = -2.1 (여전히 낮음)
├─ adjustment = -6.3Hz → 제한 -5.0Hz
├─ 주파수: 48.0 → 43.0Hz
└─ 상태: ENERGY_SAVING

Cycle 11-15 (22-30분):
├─ T6: 38.0 → 38.5 → 39.0 → 39.5°C
├─ 주파수: 43 → 42 → 41 → 40Hz (다시 하한)
├─ 팬 대수: 2대 유지 ⭐
└─ 상태: STABLE

Cycle 16-20 (32-40분):
├─ T6: 39.5 → 40.0 → 40.0 → 40.0°C (안정)
├─ 주파수: 40Hz 유지
├─ 팬 대수: 2대 유지 ⭐
└─ 상태: STABLE

최종 (40분):
├─ T6 = 40.0°C (안정)
├─ 주파수 = 40.0Hz (최소)
├─ 팬 대수 = 2대 (최소) ⭐
└─ 상태: STABLE (최대 절감!)

결과:
✅ 극저온 환경 자동 적응!
✅ 3대 → 2대 감소
✅ 주파수 40Hz (최소)
✅ 에너지 약 40% 절감!
✅ T6 = 40°C 안정 유지 (과냉각 방지)
❄️ 극지 항해 최적화!
```

---

## 📊 시나리오 7: 대수 증감 반복 (부하 변동)

### 초기 조건
```
T6 = 43.0°C (정상)
주파수 = 48.0Hz
팬 대수 = 3대
엔진 부하 = 70% (변동 예정)
외기 온도 = 25°C
```

### 진행 과정

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Part 1: 고부하 → 3대 → 4대 (0-15분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

엔진 부하: 70% → 85% (증가)

Cycle 1-5 (0-10분):
├─ T6: 43 → 44 → 45 → 45.5°C (상승)
├─ 주파수: 48 → 52 → 56 → 60Hz (최대)
├─ 팬 대수: 3대
└─ 상태: COOLING

Cycle 6 (12분):
├─ T6 = 45.8°C (고온!)
├─ ML 예측: 46.2°C
├─ 주파수: 60Hz
├─ 60Hz 지속: 10초 도달!
│
├─ 대수 증가 조건:
│  └─ 정상 + 10초? YES ✅
│
├─ ⚡ 3대 → 4대 증설!
├─ 주파수: 60Hz → 52Hz
└─ 상태: COOLING

Cycle 7-10 (14-20분):
├─ T6: 45.5 → 45.0 → 44.5°C (안정)
├─ 주파수: 52 → 54 → 56Hz
├─ 팬 대수: 4대 ⭐
└─ 상태: STABLE

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Part 2: 부하 감소 → 4대 유지 (20-35분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

엔진 부하: 85% → 70% (감소)

Cycle 11-15 (22-30분):
├─ T6: 44.5 → 44.0 → 43.5 → 43.0°C (하강)
├─ 주파수: 56 → 54 → 52 → 50Hz
├─ 팬 대수: 4대 유지 ⭐
│  (40Hz 미도달로 감소 조건 불충족)
└─ 상태: STABLE

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Part 3: 저부하 → 4대 → 3대 (35-50분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

엔진 부하: 70% → 50% (급감)

Cycle 16-20 (32-40분):
├─ T6: 43.0 → 42.5 → 42.0 → 41.5°C (하강)
├─ 주파수: 50 → 48 → 45 → 42Hz
├─ 팬 대수: 4대
└─ 상태: ENERGY_SAVING

Cycle 21 (42분):
├─ T6 = 41.0°C
├─ 주파수: 42 → 40Hz (하한 도달!)
├─ 팬 대수: 4대
├─ 40Hz 지속: Timer 시작!
└─ 상태: ENERGY_SAVING

Cycle 22-25 (44-50분):
├─ T6: 41.0 → 40.8 → 40.5°C
├─ 주파수: 40Hz 유지
├─ 팬 대수: 4대
├─ 40Hz 지속: 2 → 4 → 6 → 8초
└─ 상태: ENERGY_SAVING (대기 중...)

Cycle 26 (52분):
├─ T6 = 40.2°C
├─ 주파수: 40Hz
├─ 팬 대수: 4대
├─ 40Hz 지속: 10초 도달! ⚠️
│
├─ 대수 감소 조건:
│  └─ 40Hz + 10초? YES ✅
│
├─ ⚡ 4대 → 3대 감소!
├─ 주파수: 40Hz → 48Hz
└─ 상태: STABLE

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Part 4: 재고부하 → 3대 → 4대 (50-65분)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

엔진 부하: 50% → 85% (재증가!)

Cycle 27-30 (54-60분):
├─ T6: 40.5 → 42.0 → 43.5 → 45.0°C (급상승)
├─ 주파수: 48 → 52 → 56 → 60Hz
├─ 팬 대수: 3대
└─ 상태: COOLING

Cycle 31 (62분):
├─ T6 = 45.5°C
├─ 주파수: 60Hz
├─ 60Hz 지속: 10초 도달!
│
├─ 대수 증가 조건:
│  └─ 정상 + 10초? YES ✅
│
├─ ⚡ 3대 → 4대 재증설!
├─ 주파수: 60Hz → 52Hz
└─ 상태: COOLING

최종 (65분):
├─ T6 = 44.8°C
├─ 주파수 = 54.0Hz
├─ 팬 대수 = 4대 ⭐
└─ 상태: STABLE

대수 변화 요약:
0분: 3대 (초기)
12분: 3대 → 4대 (고부하)
52분: 4대 → 3대 (저부하)
62분: 3대 → 4대 (재고부하)

결과:
✅ 부하 변동에 자동 적응!
✅ 대수 증감 반복 성공!
✅ 온도 항상 정상 범위 유지!
✅ 에너지 효율 자동 최적화!
```

---

## 📊 대수 제어 규칙 요약

### 대수 증가 조건 (3대 → 4대)

```
Priority 1: 극한 도달 (즉시!)
┌────────────────────────────────────┐
│ 조건:                              │
│  • T6 ≥ 47.0°C                    │
│  • freq = 60Hz                     │
│                                    │
│ 대기: 0초 (즉시!)                  │
│ 이유: 긴급 고온 대응              │
└────────────────────────────────────┘

Priority 2: 극한 예상 (즉시!)
┌────────────────────────────────────┐
│ 조건:                              │
│  • T6 ≥ 46.0°C                    │
│  • ML 예측 ≥ 47.0°C               │
│  • freq = 60Hz                     │
│                                    │
│ 대기: 0초 (즉시!)                  │
│ 이유: ML 선제 대응                │
└────────────────────────────────────┘

Priority 3: 고온 (5초)
┌────────────────────────────────────┐
│ 조건:                              │
│  • T6 ≥ 45.0°C                    │
│  • freq = 60Hz                     │
│  • 5초 지속                        │
│                                    │
│ 대기: 5초                          │
│ 이유: 고온이지만 극한 아님        │
└────────────────────────────────────┘

Priority 4: 정상 (10초)
┌────────────────────────────────────┐
│ 조건:                              │
│  • T6 < 45.0°C                    │
│  • freq = 60Hz                     │
│  • 10초 지속                       │
│                                    │
│ 대기: 10초                         │
│ 이유: 안정적 증설                 │
└────────────────────────────────────┘
```

### 대수 감소 조건 (3대 → 2대, 4대 → 3대)

```
조건 (10초 대기)
┌────────────────────────────────────┐
│ 조건:                              │
│  • freq ≤ 40Hz                    │
│  • 10초 지속                       │
│  • 현재 대수 > 2                   │
│                                    │
│ 대기: 10초                         │
│ 조치: 1대 감소                     │
│ 주파수: 40Hz → 48Hz (재분배)      │
│ 이유: 에너지 절감                 │
└────────────────────────────────────┘

주의사항:
• 최소 2대 유지 (안전)
• 온도 상승 예상 시 보류
• 쿨다운 30초 적용 (떨림 방지)
```

---

## 🎯 결론

### 핵심 포인트

```
1. 상황별 차등 대응
   극한: 0초 (즉시)
   고온: 5초 (빠르게)
   정상: 10초 (안정적)

2. ML 예측 활용
   극한 예상 시 선제 증설
   대응 지연 없음

3. 에너지 절감
   저부하 시 자동 감소
   최소 2대 유지

4. 안정성 확보
   쿨다운 30초 (떨림 방지)
   온도 우선 판단
```

### 시나리오별 대수 변화

```
시나리오 2: 3대 유지 (증가 불필요)
시나리오 3: 3대 → 4대 (선제 대응!)
시나리오 4: 3대 → 4대 (긴급 대응!)
시나리오 5: 3대 → 2대 (에너지 절감)
시나리오 6: 3대 → 2대 (극지 최적화)
시나리오 7: 3↔4대 반복 (부하 적응)
```

---

**문서 버전: 1.0**  
**작성일: 2025-10-17**  
**설정: 목표 43°C, 극한 47°C, 갭 4.0°C**  
**상태: 대수 제어 로직 완성** ⭐

