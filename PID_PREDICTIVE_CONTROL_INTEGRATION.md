# PID ì œì–´ì™€ ì˜¨ë„ ì˜ˆì¸¡ ì œì–´ í†µí•© ì‹œìŠ¤í…œ

## ğŸ“‹ ëª©ì°¨
1. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
2. [PID ì œì–´ ì›ë¦¬](#pid-ì œì–´-ì›ë¦¬)
3. [ì˜¨ë„ ì˜ˆì¸¡ ì œì–´](#ì˜¨ë„-ì˜ˆì¸¡-ì œì–´)
4. [í†µí•© ì œì–´ ë¡œì§](#í†µí•©-ì œì–´-ë¡œì§)
5. [ì‹¤ì œ ì‹œë‚˜ë¦¬ì˜¤](#ì‹¤ì œ-ì‹œë‚˜ë¦¬ì˜¤)

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Integrated Controller                     â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   PID      â”‚  â”‚  Predictive  â”‚  â”‚  Energy Saving     â”‚  â”‚
â”‚  â”‚ Controller â”‚  â”‚  Controller  â”‚  â”‚  Controller        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚               â”‚                    â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                         â”‚                                   â”‚
â”‚                    ìµœì¢… ê²°ì •                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì œì–´ ê³„ì¸µ êµ¬ì¡°

```
Layer 1: ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘
  â”œâ”€ T1 (í•´ìˆ˜ ì…êµ¬)
  â”œâ”€ T4 (FW Inlet)
  â”œâ”€ T5 (FW Outlet)
  â”œâ”€ T6 (E/R Temperature)
  â””â”€ Engine Load

Layer 2: ì˜ˆì¸¡ ëª¨ë¸ (ì„ íƒì )
  â”œâ”€ 30ë¶„ íˆìŠ¤í† ë¦¬ ë°ì´í„° ë¶„ì„
  â”œâ”€ Polynomial Regression
  â””â”€ 5/10/15ë¶„ í›„ ì˜¨ë„ ì˜ˆì¸¡

Layer 3: ì œì–´ ì•Œê³ ë¦¬ì¦˜
  â”œâ”€ PID Controller (ê¸°ë³¸ ì œì–´)
  â”œâ”€ Predictive Controller (ì„ ì œì  ì œì–´)
  â””â”€ Energy Saving Controller (íš¨ìœ¨ ìµœì í™”)

Layer 4: ì•ˆì „ ì œì•½
  â”œâ”€ ì˜¨ë„ ê¸°ë°˜ ìµœì†Œ ì£¼íŒŒìˆ˜ ë³´ì¥
  â”œâ”€ ì••ë ¥ ê¸°ë°˜ ì£¼íŒŒìˆ˜ ì œí•œ
  â””â”€ ëŒ€ìˆ˜ ì œì–´ (60Hz/40Hz ì¡°ê±´)

Layer 5: ìµœì¢… ì¶œë ¥
  â”œâ”€ SW Pump Frequency
  â”œâ”€ FW Pump Frequency
  â”œâ”€ E/R Fan Frequency
  â””â”€ E/R Fan Count
```

---

## ğŸ¯ PID ì œì–´ ì›ë¦¬

### ê¸°ë³¸ ê°œë…

**PID = Proportional + Integral + Derivative**

```
PID ì¶œë ¥ = Pí•­ + Ií•­ + Dí•­
```

### E/R íŒ¬ ì œì–´ (T6 ì˜¨ë„ ê¸°ì¤€)

#### ì„¤ì •ê°’
```python
ëª©í‘œ ì˜¨ë„ (Setpoint): 43.0Â°C
ì¶œë ¥ ë²”ìœ„: 40~60Hz
ë³€í™”ìœ¨ ì œí•œ: 2Hz/ì´ˆ
ê¸°ë³¸ ê²Œì¸: Kp=5.0, Ki=0.2, Kd=1.0
```

### 1ë‹¨ê³„: ì˜¤ì°¨ ê³„ì‚°

```python
error = ëª©í‘œì˜¨ë„ - ì¸¡ì •ì˜¨ë„
error = 43.0 - T6_measured
```

**ì˜ë¯¸:**
- **ì–‘ìˆ˜ (+)**: ì˜¨ë„ê°€ ë‚®ìŒ â†’ ì£¼íŒŒìˆ˜ **ë‚®ì¶°ì•¼** (íŒ¬ ì†ë„ ê°ì†Œ â†’ ì˜¨ë„ ìƒìŠ¹)
- **ìŒìˆ˜ (-)**: ì˜¨ë„ê°€ ë†’ìŒ â†’ ì£¼íŒŒìˆ˜ **ì˜¬ë ¤ì•¼** (íŒ¬ ì†ë„ ì¦ê°€ â†’ ì˜¨ë„ í•˜ê°•)

**ì˜ˆì‹œ:**
```
T6 = 40Â°C â†’ error = +3Â°C (ì˜¨ë„ ë‚®ìŒ)
T6 = 46Â°C â†’ error = -3Â°C (ì˜¨ë„ ë†’ìŒ)
```

### 2ë‹¨ê³„: ë¹„ë¡€í•­ (P - Proportional)

```python
P = Kp Ã— error
```

**ì—­í• :** ì¦‰ê°ì ì¸ ë°˜ì‘
- ì˜¤ì°¨ê°€ í¬ë©´ í° ì¡°ì •
- ì˜¤ì°¨ê°€ ì‘ìœ¼ë©´ ì‘ì€ ì¡°ì •

**ì˜ˆì‹œ (Kp = 5.0):**
```
T6 = 40Â°C:
  error = +3Â°C
  P = 5.0 Ã— (+3) = +15Hz
  â†’ í˜„ì¬ ì£¼íŒŒìˆ˜ì—ì„œ 15Hz ê°ì†Œ ì‹ í˜¸

T6 = 46Â°C:
  error = -3Â°C
  P = 5.0 Ã— (-3) = -15Hz
  â†’ í˜„ì¬ ì£¼íŒŒìˆ˜ì—ì„œ 15Hz ì¦ê°€ ì‹ í˜¸
```

### 3ë‹¨ê³„: ì ë¶„í•­ (I - Integral)

```python
integral += error Ã— dt
I = Ki Ã— integral
```

**ì—­í• :** ëˆ„ì  ì˜¤ì°¨ ì œê±°
- ì˜¤ì°¨ê°€ ì§€ì†ë˜ë©´ ê³„ì† ì¦ê°€
- ì •ìƒ ìƒíƒœ ì˜¤ì°¨(Steady-State Error) ì œê±°
- Anti-windup: Â±10 ì œí•œ

**ì˜ˆì‹œ (Ki = 0.2):**
```
10ì´ˆ ë™ì•ˆ +3Â°C ì˜¤ì°¨ ì§€ì†:
  integral = 3 Ã— 10 = 30
  I = 0.2 Ã— 30 = +6Hz
  â†’ ì¶”ê°€ë¡œ 6Hz ê°ì†Œ ì‹ í˜¸
```

### 4ë‹¨ê³„: ë¯¸ë¶„í•­ (D - Derivative)

```python
derivative = (error - previous_error) / dt
D = Kd Ã— derivative
```

**ì—­í• :** ë³€í™” ì†ë„ ê°ì§€
- ê¸‰ê²©í•œ ë³€í™” ì–µì œ
- ì˜¤ë²„ìŠˆíŠ¸(Overshoot) ë°©ì§€

**ì˜ˆì‹œ (Kd = 1.0):**
```
ì´ì „ ì˜¤ì°¨: +3Â°C
í˜„ì¬ ì˜¤ì°¨: +1Â°C (2ì´ˆ ê²½ê³¼)
  derivative = (+1 - +3) / 2 = -1Â°C/s
  D = 1.0 Ã— (-1) = -1Hz
  â†’ ë³€í™”ê°€ ë¹ ë¥´ë¯€ë¡œ 1Hz ì¦ê°€ ì‹ í˜¸ (ë¸Œë ˆì´í¬)
```

### 5ë‹¨ê³„: ìµœì¢… ì¶œë ¥

```python
pid_output = P + I + D
output = clip(pid_output, 40Hz, 60Hz)
```

**ì „ì²´ ì˜ˆì‹œ:**
```
í˜„ì¬ ìƒíƒœ:
  T6 = 40Â°C (ëª©í‘œ 43Â°C)
  í˜„ì¬ ì£¼íŒŒìˆ˜ = 48Hz

PID ê³„ì‚°:
  P = +15Hz (ë¹„ë¡€)
  I = +6Hz  (ì ë¶„)
  D = -1Hz  (ë¯¸ë¶„)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€
  í•©ê³„ = +20Hz

ì£¼íŒŒìˆ˜ ì¡°ì •:
  ëª©í‘œ = 48 - 20 = 28Hz
  ì œí•œ ì ìš© = max(40, 28) = 40Hz

ìµœì¢… ì¶œë ¥: 40Hz
```

### 6ë‹¨ê³„: ë³€í™”ìœ¨ ì œí•œ

```python
ìµœëŒ€ ë³€í™”: 2Hz/ì´ˆ
```

**ëª©ì :** ê¸‰ê²©í•œ ë³€í™” ë°©ì§€
```
í˜„ì¬: 48Hz
ëª©í‘œ: 40Hz
ì‹œê°„: 1ì´ˆ

ìµœëŒ€ ë³€í™” = 2Hz/s Ã— 1s = 2Hz
ì‹¤ì œ ì¶œë ¥ = 48 - 2 = 46Hz (ì ì§„ì  ê°ì†Œ)
```

---

## ğŸ”® ì˜¨ë„ ì˜ˆì¸¡ ì œì–´

### ì˜ˆì¸¡ ëª¨ë¸: Polynomial Regression

#### ì…ë ¥ ë°ì´í„°
```python
TemperatureSequence {
    timestamps: [t-30ë¶„, ..., t-0ë¶„]  # 90ê°œ ë°ì´í„°í¬ì¸íŠ¸
    T1_sequence: [...]  # í•´ìˆ˜ ì…êµ¬ ì˜¨ë„
    T4_sequence: [...]  # FW Inlet
    T5_sequence: [...]  # FW Outlet
    T6_sequence: [...]  # E/R ì˜¨ë„
    T7_sequence: [...]  # ì²­ìˆ˜ ì˜¨ë„
    engine_load_sequence: [...]  # ì—”ì§„ ë¶€í•˜
}
```

#### íŠ¹ì§• ì¶”ì¶œ (Feature Extraction)
```python
ê° ì˜¨ë„ë³„ íŠ¹ì§•:
  - í˜„ì¬ê°’ (current)
  - í‰ê· ê°’ (mean_30min)
  - í‘œì¤€í¸ì°¨ (std_30min)
  - ìƒìŠ¹ë¥  (rate_of_increase)

ì´ 19ê°œ íŠ¹ì§•:
  T1 íŠ¹ì§• (4ê°œ)
  T4 íŠ¹ì§• (4ê°œ)
  T5 íŠ¹ì§• (4ê°œ)
  T6 íŠ¹ì§• (4ê°œ)
  T7 íŠ¹ì§• (2ê°œ)
  Engine Load (1ê°œ)
```

#### ë‹¤í•­ì‹ íŠ¹ì§• (Polynomial Features)
```python
ê¸°ë³¸ íŠ¹ì§• + ì œê³±í•­ + êµì°¨í•­
  - XÂ² (ì œê³±)
  - X Ã— Y (êµì°¨)
  - T4 Ã— Engine_Load (ì¤‘ìš”!)

ì´ ~210ê°œ íŠ¹ì§•
```

#### ì˜ˆì¸¡ ì¶œë ¥
```python
TemperaturePrediction {
    # í˜„ì¬ ì˜¨ë„
    t4_current, t5_current, t6_current
    
    # 5ë¶„ í›„ ì˜ˆì¸¡
    t4_pred_5min, t5_pred_5min, t6_pred_5min
    
    # 10ë¶„ í›„ ì˜ˆì¸¡
    t4_pred_10min, t5_pred_10min, t6_pred_10min
    
    # 15ë¶„ í›„ ì˜ˆì¸¡
    t4_pred_15min, t5_pred_15min, t6_pred_15min
    
    # ì‹ ë¢°ë„ (0~1)
    confidence: 0.85
}
```

### ì˜ˆì¸¡ ì •í™•ë„
```
í‰ê·  ì˜¤ì°¨: Â±0.5Â°C
ì‹ ë¢°ë„ > 0.5: ì˜ˆì¸¡ ì œì–´ í™œì„±í™”
ì‹ ë¢°ë„ â‰¤ 0.5: ê¸°ë³¸ PID ì œì–´
```

---

## ğŸ”„ í†µí•© ì œì–´ ë¡œì§

### ì œì–´ íë¦„ë„

```
ì‹œì‘
  â†“
ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘ (T1~T7, Engine Load)
  â†“
30ë¶„ íˆìŠ¤í† ë¦¬ ë²„í¼ ì—…ë°ì´íŠ¸
  â†“
ì˜¨ë„ ì˜ˆì¸¡ (Polynomial Regression)
  â†“
ì‹ ë¢°ë„ > 0.5?
  â”œâ”€ Yes â†’ ì˜ˆì¸¡ ì œì–´ ëª¨ë“œ
  â””â”€ No  â†’ ê¸°ë³¸ ì œì–´ ëª¨ë“œ
  â†“
PID ê¸°ë³¸ ì¶œë ¥ ê³„ì‚°
  â†“
ì˜ˆì¸¡ ë³´ì • ì ìš© (ì˜ˆì¸¡ ëª¨ë“œ ì‹œ)
  â†“
ì—ë„ˆì§€ ì ˆê° ì œì–´
  â†“
T6 ì˜¨ë„ ì•ˆì „ ì œì•½
  â†“
ì••ë ¥ ì•ˆì „ ì œì•½
  â†“
ëŒ€ìˆ˜ ì œì–´ (60Hz/40Hz)
  â†“
ìµœì¢… ì£¼íŒŒìˆ˜ ì¶œë ¥
```

### ëª¨ë“œ 1: ì˜ˆì¸¡ ì œì–´ (Predictive Control)

#### í™œì„±í™” ì¡°ê±´
```python
if confidence > 0.5:
    mode = "Predictive Control"
```

#### ë™ì‘ ìˆœì„œ

**1ë‹¨ê³„: PID ê¸°ë³¸ ì¶œë ¥**
```python
pid_output = {
    'sw_pump_freq': 48Hz,  # T5 ì œì–´
    'er_fan_freq': 48Hz    # T6 ì œì–´
}
```

**2ë‹¨ê³„: 10ë¶„ í›„ ì˜¨ë„ ë³€í™” ì˜ˆì¸¡**
```python
t4_delta = t4_pred_10min - t4_current
t5_delta = t5_pred_10min - t5_current
t6_delta = t6_pred_10min - t6_current
```

**3ë‹¨ê³„: ì˜ˆì¸¡ ë³´ì •ê°’ ê³„ì‚°**
```python
# T4 (FW Inlet) ìƒìŠ¹ ì˜ˆìƒ â†’ FW íŒí”„ ì¦ì†
if t4_delta > 1.0:
    fw_adjustment = +3Hz
elif t4_delta > 0.5:
    fw_adjustment = +2Hz

# T5 (FW Outlet) ìƒìŠ¹ ì˜ˆìƒ â†’ SW íŒí”„ ì¦ì†
if t5_delta > 0.5:
    sw_adjustment = +3Hz
elif t5_delta > 0.3:
    sw_adjustment = +2Hz

# T6 (E/R Temp) ìƒìŠ¹ ì˜ˆìƒ â†’ E/R íŒ¬ ì¦ì†
if t6_delta > 1.0:
    fan_adjustment = +4Hz
elif t6_delta > 0.5:
    fan_adjustment = +2Hz
```

**4ë‹¨ê³„: ìµœì¢… ì£¼íŒŒìˆ˜**
```python
decision.sw_pump_freq = min(60, pid_output['sw_pump_freq'] + sw_adjustment)
decision.fw_pump_freq = min(60, energy_output['fw_pump_freq'] + fw_adjustment)
decision.er_fan_freq = min(60, pid_output['er_fan_freq'] + fan_adjustment)
```

#### êµ¬ì²´ì ì¸ ì˜ˆì‹œ

```
í˜„ì¬ ìƒíƒœ:
  T6 = 43.0Â°C (ëª©í‘œ 43Â°C)
  PID ì¶œë ¥ = 48Hz (ì •ìƒ)

10ë¶„ í›„ ì˜ˆì¸¡:
  T6 ì˜ˆì¸¡ = 45.5Â°C
  t6_delta = +2.5Â°C (ìƒìŠ¹ ì˜ˆìƒ!)

ì˜ˆì¸¡ ë³´ì •:
  if t6_delta > 1.0:
      fan_adjustment = +4Hz

ìµœì¢… ì£¼íŒŒìˆ˜:
  decision.er_fan_freq = min(60, 48 + 4) = 52Hz

ì œì–´ ì´ìœ :
  "ì˜ˆì¸¡ ì œì–´: T6 +2.5Â°C ì˜ˆìƒ â†’ E/R íŒ¬ +4Hz"
```

**íš¨ê³¼:**
- âœ… ì˜¨ë„ê°€ ì˜¤ë¥´ê¸° ì „ì— ë¯¸ë¦¬ ì¦ì†
- âœ… ì˜¨ë„ ë³€í™” ìµœì†Œí™”
- âœ… ì—ë„ˆì§€ íš¨ìœ¨ í–¥ìƒ

### ëª¨ë“œ 2: ê¸°ë³¸ ì œì–´ (PID + Energy Saving)

#### í™œì„±í™” ì¡°ê±´
```python
if confidence â‰¤ 0.5:
    mode = "Basic Control"
```

#### ë™ì‘ ìˆœì„œ

**1ë‹¨ê³„: PID ì¶œë ¥**
```python
pid_output = {
    'sw_pump_freq': 48Hz,  # T5 ì œì–´
    'er_fan_freq': 48Hz    # T6 ì œì–´
}
```

**2ë‹¨ê³„: ì—ë„ˆì§€ ì ˆê° ì¶œë ¥**
```python
energy_output = {
    'fw_pump_freq': 45Hz   # T4 ì œì–´
}
```

**3ë‹¨ê³„: ìµœì¢… ê²°ì •**
```python
decision.sw_pump_freq = pid_output['sw_pump_freq']
decision.fw_pump_freq = energy_output['fw_pump_freq']
decision.er_fan_freq = pid_output['er_fan_freq']
```

---

## ğŸ›¡ï¸ ì•ˆì „ ì œì•½ (Safety Constraints)

### 1. T6 ì˜¨ë„ ê¸°ë°˜ ìµœì†Œ ì£¼íŒŒìˆ˜ ë³´ì¥

```python
if t6_temp > 44.0:
    # ìµœì†Œ 52Hz ë³´ì¥ (PIDê°€ 60Hzê¹Œì§€ ì˜¬ë¦´ ìˆ˜ ìˆìŒ)
    decision.er_fan_freq = max(decision.er_fan_freq, 52.0)
    
elif t6_temp > 42.0:
    # ìµœì†Œ 48Hz ë³´ì¥ (ì •ìƒ ë²”ìœ„)
    decision.er_fan_freq = max(decision.er_fan_freq, 48.0)
    
elif t6_temp >= 40.0:
    # ì˜¨ë„ê°€ ë‚®ìœ¼ë¯€ë¡œ ì£¼íŒŒìˆ˜ ê°ì†Œ í—ˆìš©
    adjusted_freq = max(40.0, decision.er_fan_freq - 2.0)
    decision.er_fan_freq = adjusted_freq
    
else:  # t6_temp < 40.0
    # ì¶”ê°€ ê°ì†Œ í—ˆìš©
    adjusted_freq = max(40.0, decision.er_fan_freq - 4.0)
    decision.er_fan_freq = adjusted_freq
```

**ì¤‘ìš”:** T6 ì˜¨ë„ ì œì–´ëŠ” **ìµœì†Œê°’ë§Œ ë³´ì¥**, **ìµœëŒ€ê°’(60Hz) ì œí•œ ì—†ìŒ!**

### 2. ì••ë ¥ ê¸°ë°˜ ì£¼íŒŒìˆ˜ ì œí•œ

```python
if pressure < 1.0:
    # ì••ë ¥ì´ ë‚®ìœ¼ë©´ ì£¼íŒŒìˆ˜ ê°ì†Œ ì œí•œ
    decision.sw_pump_freq = max(current_sw_freq, decision.sw_pump_freq)
    decision.fw_pump_freq = max(current_fw_freq, decision.fw_pump_freq)
```

### 3. ëŒ€ìˆ˜ ì œì–´ (E/R Fan Count Control)

#### ëŒ€ìˆ˜ ì¦ê°€ ì¡°ê±´
```python
if decision.er_fan_freq >= 60.0:  # ìµœëŒ€ ì£¼íŒŒìˆ˜ ë„ë‹¬
    time_at_max += 2ì´ˆ
    
    if time_at_max >= 10ì´ˆ and current_count < 4:
        # ëŒ€ìˆ˜ ì¦ê°€!
        decision.er_fan_count = current_count + 1
        decision.er_fan_freq = 52Hz  # ì£¼íŒŒìˆ˜ ê°ì†Œ
        time_at_max = 0  # íƒ€ì´ë¨¸ ë¦¬ì…‹
```

#### ëŒ€ìˆ˜ ê°ì†Œ ì¡°ê±´
```python
if decision.er_fan_freq <= 40.0:  # ìµœì†Œ ì£¼íŒŒìˆ˜ ë„ë‹¬
    time_at_min += 2ì´ˆ
    
    if time_at_min >= 10ì´ˆ and current_count > 2:
        # ëŒ€ìˆ˜ ê°ì†Œ!
        decision.er_fan_count = current_count - 1
        decision.er_fan_freq = 48Hz  # ì£¼íŒŒìˆ˜ ì¦ê°€
        time_at_min = 0  # íƒ€ì´ë¨¸ ë¦¬ì…‹
```

#### ì•ˆì • ëŒ€ì—­
```python
if 40 < decision.er_fan_freq < 60:
    # í˜„ì¬ ëŒ€ìˆ˜ ìœ ì§€
    # íƒ€ì´ë¨¸ ë¦¬ì…‹
    time_at_max = 0
    time_at_min = 0
```

---

## ğŸ¬ ì‹¤ì œ ì‹œë‚˜ë¦¬ì˜¤: E/R í™˜ê¸° ë¶ˆëŸ‰

### Phase 1: ì˜¨ë„ ìƒìŠ¹ (0~180ì´ˆ, T6: 42â†’48Â°C)

#### ì‹œê°„ 0ì´ˆ
```
í˜„ì¬ ìƒíƒœ:
  T6 = 42.0Â°C
  PID ì¶œë ¥ = 48Hz
  
ì˜ˆì¸¡ (10ë¶„ í›„):
  T6 ì˜ˆì¸¡ = 44.0Â°C
  t6_delta = +2.0Â°C
  
ì˜ˆì¸¡ ë³´ì •:
  fan_adjustment = +4Hz
  
ìµœì¢… ì£¼íŒŒìˆ˜:
  52Hz
  
ì œì–´ ì´ìœ :
  "ì˜ˆì¸¡ ì œì–´: T6 +2.0Â°C ì˜ˆìƒ â†’ E/R íŒ¬ +4Hz"
```

#### ì‹œê°„ 60ì´ˆ
```
í˜„ì¬ ìƒíƒœ:
  T6 = 44.0Â°C
  PID ì¶œë ¥ = 52Hz
  
ì˜ˆì¸¡ (10ë¶„ í›„):
  T6 ì˜ˆì¸¡ = 46.0Â°C
  t6_delta = +2.0Â°C
  
ì˜ˆì¸¡ ë³´ì •:
  fan_adjustment = +4Hz
  
ìµœì¢… ì£¼íŒŒìˆ˜:
  56Hz
```

#### ì‹œê°„ 120ì´ˆ
```
í˜„ì¬ ìƒíƒœ:
  T6 = 46.0Â°C
  PID ì¶œë ¥ = 58Hz
  
ì˜ˆì¸¡ (10ë¶„ í›„):
  T6 ì˜ˆì¸¡ = 48.0Â°C
  t6_delta = +2.0Â°C
  
ì˜ˆì¸¡ ë³´ì •:
  fan_adjustment = +4Hz
  
ìµœì¢… ì£¼íŒŒìˆ˜:
  60Hz (ìµœëŒ€!)
```

#### ì‹œê°„ 130ì´ˆ
```
ëŒ€ìˆ˜ ì œì–´ í™œì„±í™”:
  ì£¼íŒŒìˆ˜ 60Hz & 10ì´ˆ ì§€ì†
  
ëŒ€ìˆ˜ ì¦ê°€:
  3ëŒ€ â†’ 4ëŒ€
  
ì£¼íŒŒìˆ˜ ì¡°ì •:
  60Hz â†’ 52Hz
  
ì´ìœ :
  "60Hz ìµœëŒ€ ë„ë‹¬ â†’ íŒ¬ 3â†’4ëŒ€ ì¦ê°€"
```

### Phase 2: ì˜¨ë„ í•˜ê°• (180~540ì´ˆ, T6: 48â†’38Â°C)

#### ì‹œê°„ 300ì´ˆ
```
í˜„ì¬ ìƒíƒœ:
  T6 = 45.0Â°C
  PID ì¶œë ¥ = 48Hz
  ëŒ€ìˆ˜ = 4ëŒ€
  
ì˜ˆì¸¡ (10ë¶„ í›„):
  T6 ì˜ˆì¸¡ = 43.0Â°C
  t6_delta = -2.0Â°C (í•˜ê°• ì˜ˆìƒ)
  
ì˜ˆì¸¡ ë³´ì •:
  fan_adjustment = 0Hz (í•˜ê°• ì‹œ ë³´ì • ì—†ìŒ)
  
ìµœì¢… ì£¼íŒŒìˆ˜:
  48Hz
```

#### ì‹œê°„ 480ì´ˆ
```
í˜„ì¬ ìƒíƒœ:
  T6 = 40.0Â°C
  PID ì¶œë ¥ = 42Hz
  ëŒ€ìˆ˜ = 4ëŒ€
  
T6 ì˜¨ë„ ì œì–´:
  t6_temp >= 40.0
  adjusted_freq = max(40, 42 - 2) = 40Hz
  
ìµœì¢… ì£¼íŒŒìˆ˜:
  40Hz (ìµœì†Œ!)
```

#### ì‹œê°„ 490ì´ˆ
```
ëŒ€ìˆ˜ ì œì–´ í™œì„±í™”:
  ì£¼íŒŒìˆ˜ 40Hz & 10ì´ˆ ì§€ì†
  
ëŒ€ìˆ˜ ê°ì†Œ:
  4ëŒ€ â†’ 3ëŒ€
  
ì£¼íŒŒìˆ˜ ì¡°ì •:
  40Hz â†’ 48Hz
  
ì´ìœ :
  "40Hz ì§€ì† â†’ íŒ¬ 4â†’3ëŒ€ ê°ì†Œ"
```

---

## ğŸ“Š ì œì–´ ì„±ëŠ¥ ë¹„êµ

### ê¸°ë³¸ PID ì œì–´ vs ì˜ˆì¸¡ ì œì–´

| í•­ëª© | ê¸°ë³¸ PID | ì˜ˆì¸¡ ì œì–´ |
|------|----------|-----------|
| ë°˜ì‘ ì†ë„ | ëŠë¦¼ (ì‚¬í›„ ëŒ€ì‘) | ë¹ ë¦„ (ì‚¬ì „ ëŒ€ì‘) |
| ì˜¨ë„ ë³€í™”í­ | Â±2Â°C | Â±0.5Â°C |
| ì—ë„ˆì§€ íš¨ìœ¨ | ë³´í†µ | ìš°ìˆ˜ |
| ì˜¤ë²„ìŠˆíŠ¸ | ë°œìƒ ê°€ëŠ¥ | ìµœì†Œí™” |
| ì•ˆì •í™” ì‹œê°„ | 5~10ë¶„ | 2~3ë¶„ |

### ì˜ˆì¸¡ ì œì–´ì˜ ì¥ì 

1. **ì„ ì œì  ëŒ€ì‘**
   - ì˜¨ë„ê°€ ì˜¤ë¥´ê¸° ì „ì— ë¯¸ë¦¬ ì¦ì†
   - ì˜¨ë„ ë³€í™” ìµœì†Œí™”

2. **ì—ë„ˆì§€ ì ˆê°**
   - ê³¼ë„í•œ ì¦ì† ë°©ì§€
   - ìµœì  ì£¼íŒŒìˆ˜ ìœ ì§€

3. **ì•ˆì •ì„± í–¥ìƒ**
   - ì˜¨ë„ ë³€í™”í­ ê°ì†Œ
   - ì˜¤ë²„ìŠˆíŠ¸ ë°©ì§€

4. **ì˜ˆì¸¡ ê°€ëŠ¥ì„±**
   - 10ë¶„ í›„ ìƒí™© ì˜ˆì¸¡
   - ìš´ì „ì ì˜ì‚¬ê²°ì • ì§€ì›

---

## ğŸ”§ ì£¼ìš” íŒŒë¼ë¯¸í„°

### PID ê²Œì¸
```python
T5 Controller (FW Outlet):
  Kp = 3.0
  Ki = 0.15
  Kd = 0.8

T6 Controller (E/R Temp):
  Kp = 5.0
  Ki = 0.2
  Kd = 1.0
```

### ì˜ˆì¸¡ ë³´ì •ê°’
```python
T4 (FW Inlet):
  delta > 1.0Â°C: +3Hz
  delta > 0.5Â°C: +2Hz

T5 (FW Outlet):
  delta > 0.5Â°C: +3Hz
  delta > 0.3Â°C: +2Hz

T6 (E/R Temp):
  delta > 1.0Â°C: +4Hz
  delta > 0.5Â°C: +2Hz
```

### ëŒ€ìˆ˜ ì œì–´
```python
ì¦ê°€ ì¡°ê±´:
  ì£¼íŒŒìˆ˜ â‰¥ 60Hz & 10ì´ˆ ì§€ì†
  ìµœëŒ€ 4ëŒ€

ê°ì†Œ ì¡°ê±´:
  ì£¼íŒŒìˆ˜ â‰¤ 40Hz & 10ì´ˆ ì§€ì†
  ìµœì†Œ 2ëŒ€
```

---

## ğŸ¯ í•µì‹¬ ìš”ì•½

### 1. PID ì œì–´
- **í˜„ì¬ ì˜¨ë„ ì˜¤ì°¨ ê¸°ë°˜**
- **ì¦‰ê°ì ì¸ í”¼ë“œë°± ì œì–´**
- **ëª©í‘œ ì˜¨ë„ ìœ ì§€**

### 2. ì˜ˆì¸¡ ì œì–´
- **ë¯¸ë˜ ì˜¨ë„ ë³€í™” ì˜ˆì¸¡**
- **ì„ ì œì  ì£¼íŒŒìˆ˜ ì¡°ì •**
- **ì˜¨ë„ ë³€í™” ìµœì†Œí™”**

### 3. í†µí•© ì œì–´
- **PID + ì˜ˆì¸¡ = ìµœì  ì œì–´**
- **ì•ˆì „ ì œì•½ ì ìš©**
- **ëŒ€ìˆ˜ ì œì–´ í†µí•©**

### 4. ì œì–´ ìš°ì„ ìˆœìœ„
```
1ìˆœìœ„: ì•ˆì „ ì œì•½ (ì˜¨ë„, ì••ë ¥)
2ìˆœìœ„: ëŒ€ìˆ˜ ì œì–´ (60Hz/40Hz)
3ìˆœìœ„: ì˜ˆì¸¡ ì œì–´ (ì‹ ë¢°ë„ > 0.5)
4ìˆœìœ„: PID ì œì–´ (ê¸°ë³¸)
5ìˆœìœ„: ì—ë„ˆì§€ ì ˆê°
```

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ê´€ë ¨ íŒŒì¼
- `src/control/pid_controller.py` - PID ì œì–´ê¸°
- `src/ml/temperature_predictor.py` - ì˜¨ë„ ì˜ˆì¸¡ ëª¨ë¸
- `src/control/integrated_controller.py` - í†µí•© ì œì–´ê¸°
- `src/control/energy_saving.py` - ì—ë„ˆì§€ ì ˆê° ì œì–´

### ìˆ˜í•™ì  ë°°ê²½
- PID ì œì–´ ì´ë¡ 
- Polynomial Regression
- Feature Engineering
- Time Series Prediction

---

ìƒì„±ì¼: 2025-10-15
ë²„ì „: 1.0
ì‘ì„±ì: AI Assistant



